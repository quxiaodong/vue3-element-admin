import{q as k,i as M}from"./index-DqFQ5e75.js";import{d as N}from"./dayjs-BwlS6atb.js";import{Q as P}from"./@element-plus-C-Z9JL_H.js";import{d as w,ai as m,o as V,O as U,P as u,V as l,u as _,T as S,U as C,S as A,ay as q,aA as D,az as T,Z as Y,a as z,r as $,c as R,ah as b,q as H}from"./@vue-BL6WjEgc.js";import{a as I,c as L,d as j}from"./element-plus-ClT9ND06.js";import"./@vueuse-D2azi8Wr.js";import"./vue-router-Di1CRR72.js";import"./axios-CCb-kr4I.js";import"./pinia-CaU9RLb4.js";import"./vue-i18n-BPnRIkwB.js";import"./@intlify-DqB41OTx.js";import"./sortablejs-Cw1ESr5Y.js";import"./color-Dhq0Q_AS.js";import"./color-string-CKWVXYG4.js";import"./color-name-BQ5IbGbl.js";import"./simple-swizzle-Tvclth0e.js";import"./color-convert-CkRI355n.js";import"./mockjs-DimkVF-k.js";import"./nprogress-CFoLm_ff.js";import"./lodash-es-1chB_st9.js";import"./@popperjs-D9SI2xQl.js";import"./@ctrl-r5W6hzzQ.js";import"./async-validator-DKvM95Vc.js";import"./memoize-one-BdPwpGay.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./@floating-ui-DVIT0l11.js";const F=()=>k(o=>({url:"/administrator/menu",method:"get",params:o})),O=o=>k(()=>({url:"/administrator/menu/"+o,method:"get"})),Q=()=>k(o=>({url:"/administrator/menu",method:"post",data:o})),B=o=>k(s=>({url:"/administrator/menu/"+o,method:"patch",data:s})),W=o=>k(()=>({url:"/administrator/menu/"+o,method:"delete"})),Z=w({__name:"Remove",props:{row:{}},emits:["refresh"],setup(o,{emit:s}){const i=s,{execute:e,loading:t}=W(o.row.id),f=()=>e().then(()=>i("refresh"));return(d,r)=>{const n=m("Loading"),a=m("el-icon"),p=m("el-link"),v=m("el-popconfirm");return V(),U(v,{width:"auto",placement:"top","confirm-button-text":d.$t("common.confirm"),"cancel-button-text":d.$t("common.cancel"),title:d.$t("common.confirm-remove?"),disabled:_(t),onConfirm:f},{reference:u(()=>[l(p,{type:"primary",underline:!1,disabled:_(t)},{default:u(()=>[S(C(d.$t("common.remove"))+" ",1),_(t)?(V(),U(a,{key:0,class:"is-loading"},{default:u(()=>[l(n)]),_:1})):A("",!0)]),_:1},8,["disabled"])]),_:1},8,["confirm-button-text","cancel-button-text","title","disabled"])}}}),x=w({__name:"Status",props:{row:{}},emits:["refresh"],setup(o,{emit:s}){const i=s,{execute:e,loading:t}=B(o.row.id),f=()=>e({status:o.row.status^1}).then(()=>i("refresh"));return(d,r)=>{const n=m("el-switch");return V(),U(n,{loading:_(t),"model-value":d.row.status,"active-value":0,"inactive-value":1,"active-text":d.$t("common.enable"),"inactive-text":d.$t("common.disable"),"inline-prompt":"",style:{"--el-switch-on-color":"#13ce66","--el-switch-off-color":"#ff4949"},onChange:f},null,8,["loading","model-value","active-text","inactive-text"])}}}),G={class:"text-right"},E=w({__name:"Form",props:q({loading:{type:Boolean}},{modelValue:{required:!0},modelModifiers:{}}),emits:q(["submit"],["update:modelValue"]),setup(o,{emit:s}){const i=s,e=D("dom"),t=T(o,"modelValue"),f=Y({name:[{required:!0,message:M.t("common.please-input"),trigger:"blur"}],path:[{required:!0,message:M.t("common.please-input"),trigger:"blur"}],status:[{required:!0,message:M.t("common.please-select"),trigger:"blur"}]}),d=()=>{e.value&&e.value.validate().then(()=>i("submit"))};return(r,n)=>{const a=m("el-input"),p=m("el-form-item"),v=m("el-option"),g=m("el-select"),h=m("el-button"),c=m("el-form");return V(),U(c,{ref_key:"dom",ref:e,model:t.value,rules:f,"label-width":"auto"},{default:u(()=>[l(p,{prop:"name",label:r.$t("/administrator/menu.name")},{default:u(()=>[l(a,{modelValue:t.value.name,"onUpdate:modelValue":n[0]||(n[0]=y=>t.value.name=y),placeholder:r.$t("common.please-input")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),l(p,{prop:"path",label:r.$t("/administrator/menu.path")},{default:u(()=>[l(a,{modelValue:t.value.path,"onUpdate:modelValue":n[1]||(n[1]=y=>t.value.path=y),placeholder:r.$t("common.please-input")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),l(p,{prop:"status",label:r.$t("/administrator/menu.status")},{default:u(()=>[l(g,{modelValue:t.value.status,"onUpdate:modelValue":n[2]||(n[2]=y=>t.value.status=y),placeholder:r.$t("common.please-select")},{default:u(()=>[l(v,{value:0,label:r.$t("common.enable")},null,8,["label"]),l(v,{value:1,label:r.$t("common.disable")},null,8,["label"])]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),z("div",G,[l(h,{type:"primary",loading:r.loading,onClick:d},{default:u(()=>[S(C(r.$t("common.submit")),1)]),_:1},8,["loading"])])]),_:1},8,["model","rules"])}}}),J=w({__name:"Update",props:{row:{}},emits:["refresh"],setup(o,{emit:s}){const i=s,e=$({}),t=$(!1),{execute:f,loading:d}=B(o.row.id),r=()=>{t.value=!0,e.value={...o.row},O(o.row.id).execute()},n=()=>f(e.value).then(()=>{t.value=!1,i("refresh")});return(a,p)=>{const v=m("el-link"),g=m("common-dialog");return V(),R("div",null,[l(v,{type:"primary",underline:!1,onClick:r},{default:u(()=>[S(C(a.$t("common.edit")),1)]),_:1}),l(g,{modelValue:t.value,"onUpdate:modelValue":p[1]||(p[1]=h=>t.value=h),title:a.$t("common.edit")},{default:u(()=>[l(E,{modelValue:e.value,"onUpdate:modelValue":p[0]||(p[0]=h=>e.value=h),loading:_(d),onSubmit:n},null,8,["modelValue","loading"])]),_:1},8,["modelValue","title"])])}}}),K=o=>{const s=b(I,{direction:"vertical"});return[{type:"selection",prop:"selection",i18n:"/administrator/menu.selection"},{prop:"id",i18n:"/administrator/menu.id",defaultHide:!0},{prop:"name",i18n:"/administrator/menu.name",alwaysShow:!0},{prop:"path",i18n:"/administrator/menu.path"},{prop:"icon",i18n:"/administrator/menu.icon",defaultSlot:({row:{icon:e}})=>e?[b(L,{size:20},()=>[b(P[e])])]:[]},{prop:"parent",i18n:"/administrator/menu.parent",defaultSlot:({row:e})=>{var t;return[b("div",(t=e.parent)==null?void 0:t.path)]}},{prop:"createAt",i18n:"/administrator/menu.create-time"},{prop:"status",i18n:"/administrator/menu.status",defaultSlot:({row:e})=>[b(x,{row:e,onRefresh:o.refresh})]},{prop:"$",i18n:"/administrator/menu.operations",minWidth:100,defaultSlot:({row:e})=>[b(j,{spacer:s,wrap:!0},()=>[b(J,{row:e,onRefresh:o.refresh}),b(Z,{row:e,onRefresh:o.refresh})])]}]},X=w({__name:"Create",emits:["refresh"],setup(o,{emit:s}){const i=s,e=()=>({name:"",path:"",status:0}),t=$(e()),f=$(!1),{execute:d,loading:r}=Q(),n=()=>{f.value=!0,t.value=e()},a=()=>d(t.value).then(()=>{f.value=!1,i("refresh")});return(p,v)=>{const g=m("el-button"),h=m("common-dialog");return V(),R("div",null,[l(g,{type:"primary",icon:"Plus",onClick:n},{default:u(()=>[S(C(p.$t("common.create")),1)]),_:1}),l(h,{modelValue:f.value,"onUpdate:modelValue":v[1]||(v[1]=c=>f.value=c),title:p.$t("common.create")},{default:u(()=>[l(E,{modelValue:t.value,"onUpdate:modelValue":v[0]||(v[0]=c=>t.value=c),loading:_(r),onSubmit:a},null,8,["modelValue","loading"])]),_:1},8,["modelValue","title"])])}}}),Se=w({__name:"Index",setup(o){const s=()=>({pageNo:1,pageSize:10}),i=$(s()),e=F(),t=$(s()),f=H(()=>{var n;return(((n=e.result.value)==null?void 0:n.data)??[]).map(a=>(a.createAt=N(a.createAt).format("YYYY-MM-DD HH:mm:ss"),a))}),d=K(e),r={"onSelection-change":n=>{console.log(n)}};return e.execute(t.value),(n,a)=>{const p=m("el-input"),v=m("el-form-item"),g=m("common-search"),h=m("common-table");return V(),R("div",null,[l(g,{model:i.value,"onUpdate:model":a[2]||(a[2]=c=>i.value=c),params:t.value,"onUpdate:params":a[3]||(a[3]=c=>t.value=c),service:_(e),"init-value":s},{default:u(()=>[l(v,{label:n.$t("/administrator/menu.name")},{default:u(()=>[l(p,{modelValue:i.value.name,"onUpdate:modelValue":a[0]||(a[0]=c=>i.value.name=c),placeholder:n.$t("common.please-input")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),l(v,{label:n.$t("/administrator/menu.path")},{default:u(()=>[l(p,{modelValue:i.value.path,"onUpdate:modelValue":a[1]||(a[1]=c=>i.value.path=c),placeholder:n.$t("common.please-input")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["model","params","service"]),l(h,{params:t.value,"onUpdate:params":a[4]||(a[4]=c=>t.value=c),data:f.value,columns:_(d),service:_(e),"table-props":r},{toolbar:u(()=>[l(X,{onRefresh:_(e).refresh},null,8,["onRefresh"])]),_:1},8,["params","data","columns","service"])])}}});export{Se as default};
