const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./Index-B-rRpjFU.js","./@element-plus-C-Z9JL_H.js","./@vue-BL6WjEgc.js","./@vueuse-D2azi8Wr.js","./element-plus-logo-DBEToQFO.js","./vue-router-Di1CRR72.js","./sign-BLvdy9Rk.js","./element-plus-ClT9ND06.js","./lodash-es-1chB_st9.js","./@popperjs-D9SI2xQl.js","./@ctrl-r5W6hzzQ.js","./dayjs-BwlS6atb.js","./color-Dhq0Q_AS.js","./color-string-CKWVXYG4.js","./color-name-BQ5IbGbl.js","./simple-swizzle-Tvclth0e.js","./color-convert-CkRI355n.js","./async-validator-DKvM95Vc.js","./memoize-one-BdPwpGay.js","./normalize-wheel-es-B6fDCfyv.js","./@floating-ui-DVIT0l11.js","./axios-CCb-kr4I.js","./pinia-CaU9RLb4.js","./vue-i18n-BPnRIkwB.js","./@intlify-DqB41OTx.js","./sortablejs-Cw1ESr5Y.js","./mockjs-DimkVF-k.js","./nprogress-CFoLm_ff.js","./Index-BkR_L1Y-.css","./Index-BEhqYX5C.js","./Index-DGcqFY1S.js","./Index-BOHqcSD3.js","./Index-CMgOuigK.js","./Index-CoEdmwfY.js"])))=>i.map(i=>d[i]);
import{r as b,d as k,o as f,O as v,P as i,V as u,c as P,a8 as N,u as d,F as D,a as T,R as ne,ai as m,J as be,T as O,U as I,q as w,I as V,S as $e,ay as fe,az as _e,aA as ke,L as Se,aa as Be,Q as he,W as Te,b as We,ah as He,aq as Ge,w as Je,at as Qe}from"./@vue-BL6WjEgc.js";import{u as Ke,c as Z,a as Xe,b as Ye,d as et}from"./@vueuse-D2azi8Wr.js";import{c as tt,a as ot}from"./vue-router-Di1CRR72.js";import{a as nt}from"./axios-CCb-kr4I.js";import{E as H,a as at,l as st,b as rt,i as ct}from"./element-plus-ClT9ND06.js";import{d as lt,c as it}from"./pinia-CaU9RLb4.js";import{c as mt}from"./vue-i18n-BPnRIkwB.js";import{S as ut}from"./sortablejs-Cw1ESr5Y.js";import{Q as dt}from"./@element-plus-C-Z9JL_H.js";import{C as Q}from"./color-Dhq0Q_AS.js";import{M as C}from"./mockjs-DimkVF-k.js";import{N as Pe}from"./nprogress-CFoLm_ff.js";import"./lodash-es-1chB_st9.js";import"./@popperjs-D9SI2xQl.js";import"./@ctrl-r5W6hzzQ.js";import"./dayjs-BwlS6atb.js";import"./async-validator-DKvM95Vc.js";import"./memoize-one-BdPwpGay.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./@floating-ui-DVIT0l11.js";import"./@intlify-DqB41OTx.js";import"./color-string-CKWVXYG4.js";import"./color-name-BQ5IbGbl.js";import"./simple-swizzle-Tvclth0e.js";import"./color-convert-CkRI355n.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const r of s.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&a(r)}).observe(document,{childList:!0,subtree:!0});function o(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function a(n){if(n.ep)return;n.ep=!0;const s=o(n);fetch(n.href,s)}})();const pt=window.location.host,me=`${pt}.admin.`,A={accessToken:`${me}accessToken`,refreshToken:`${me}refreshToken`,config:`${me}config`},G=()=>({accessToken:localStorage.getItem(A.accessToken),refreshToken:localStorage.getItem(A.refreshToken)}),ft=e=>{localStorage.setItem(A.accessToken,e.accessToken),localStorage.setItem(A.refreshToken,e.refreshToken)},Ie=()=>{localStorage.removeItem(A.accessToken),localStorage.removeItem(A.refreshToken)},U=e=>{let t={};try{const o=localStorage.getItem(A.config);return o&&(t=JSON.parse(o)),t[e]}catch{return t[e]}},j=(e,t)=>{let o={};try{const a=localStorage.getItem(A.config);a&&(o=JSON.parse(a))}finally{o[e]=t,localStorage.setItem(A.config,JSON.stringify(o))}};var Le=(e=>(e.light="light",e.dark="dark",e.auto="auto",e))(Le||{});let ee;const te=window.matchMedia("(prefers-color-scheme: dark)"),S=b(),J=b(),oe=[{icon:"Sunny",code:"light",i18n:"common:mode.light"},{icon:"Moon",code:"dark",i18n:"common:mode.dark"},{icon:"Monitor",code:"auto",i18n:"common:mode.auto"}],Ae=(e,t=!0)=>{const o=oe.find(a=>a.code===e);J.value=o??oe[oe.length-1],e=J.value.code,t&&j("dark",e),e==="light"&&S.value!==!1?(S.value=!1,ue(()=>{document.documentElement.classList.remove("dark")})):e==="dark"&&S.value!==!0?(S.value=!0,ue(()=>{document.documentElement.classList.add("dark")})):e==="auto"&&S.value!==te.matches&&(S.value=te.matches,ue(()=>{document.documentElement.classList.toggle("dark",te.matches)}))},_t=e=>ee=e,ht=e=>{var t;((t=J.value)==null?void 0:t.code)==="auto"&&(S.value=e.matches,document.documentElement.classList.toggle("dark",e.matches))};te.addEventListener("change",ht);const ue=e=>{document.startViewTransition(e).ready.then(gt)},gt=()=>{if(!ee)return;const{clientX:e,clientY:t}=ee;ee=null;const o=Math.hypot(Math.max(e,innerWidth-e),Math.max(t,innerHeight-t));document.documentElement.animate({clipPath:[`circle(0% at ${e}px ${t}px)`,`circle(${o}px at ${e}px ${t}px)`]},{duration:500,pseudoElement:"::view-transition-new(root)"})},vt={class:"placeholder"},bt=k({__name:"Index",setup(e){return(t,o)=>{const a=m("el-icon"),n=m("el-dropdown-item"),s=m("el-dropdown-menu"),r=m("el-dropdown");return f(),v(r,{onCommand:d(Ae)},{dropdown:i(()=>[u(s,null,{default:i(()=>[(f(!0),P(D,null,N(d(oe),({code:c,i18n:_,icon:p})=>{var l;return f(),v(n,{key:c,command:c,class:be({"dropdown-item-active":c===((l=d(J))==null?void 0:l.code)}),onClick:d(_t)},{default:i(()=>[u(a,null,{default:i(()=>[(f(),v(ne(p)))]),_:2},1024),O(" "+I(t.$t(_)),1)]),_:2},1032,["command","class","onClick"])}),128))]),_:1})]),default:i(()=>[T("div",vt,[u(a,{size:18},{default:i(()=>{var c;return[(f(),v(ne((c=d(J))==null?void 0:c.icon)))]}),_:1})])]),_:1},8,["onCommand"])}}}),se=()=>({isMobile:Ke("(max-width: 767px)")}),kt=k({__name:"Index",props:{width:{default:"50%"}},setup(e){const{isMobile:t}=se(),o=w(()=>t.value?"90%":e.width);return(a,n)=>{const s=m("el-dialog");return f(),v(s,{center:"","append-to-body":"","destroy-on-close":"","close-on-click-modal":!1,"close-on-press-escape":!1,width:o.value,style:{"--el-dialog-border-radius":"8px"}},{default:i(()=>[V(a.$slots,"default")]),_:3},8,["width"])}}}),yt="modulepreload",wt=function(e,t){return new URL(e,t).href},Ee={},R=function(t,o,a){let n=Promise.resolve();if(o&&o.length>0){const r=document.getElementsByTagName("link"),c=document.querySelector("meta[property=csp-nonce]"),_=(c==null?void 0:c.nonce)||(c==null?void 0:c.getAttribute("nonce"));n=Promise.allSettled(o.map(p=>{if(p=wt(p,a),p in Ee)return;Ee[p]=!0;const l=p.endsWith(".css"),h=l?'[rel="stylesheet"]':"";if(!!a)for(let x=r.length-1;x>=0;x--){const $=r[x];if($.href===p&&(!l||$.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${p}"]${h}`))return;const g=document.createElement("link");if(g.rel=l?"stylesheet":yt,l||(g.as="script"),g.crossOrigin="",g.href=p,_&&g.setAttribute("nonce",_),document.head.appendChild(g),l)return new Promise((x,$)=>{g.addEventListener("load",x),g.addEventListener("error",()=>$(new Error(`Unable to preload CSS for ${p}`)))})}))}function s(r){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=r,window.dispatchEvent(c),!c.defaultPrevented)throw r}return n.then(r=>{for(const c of r||[])c.status==="rejected"&&s(c.reason);return t().catch(s)})},z=tt({history:ot(),routes:[{path:"/",meta:{breadcrumb:"首页",i18n:"common:menu.home"},component:()=>R(()=>import("./Index-B-rRpjFU.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28]),import.meta.url)},{path:"/sign-up",component:()=>R(()=>import("./Index-BEhqYX5C.js"),__vite__mapDeps([29,4,2,3,5,21,7,8,1,9,10,11,12,13,14,15,16,17,18,19,20,22,23,24,25,26,27]),import.meta.url),children:[{path:"",meta:{whitelist:!0,breadcrumb:"注册",i18n:"common:menu.sign-up"},component:()=>R(()=>import("./Index-DGcqFY1S.js"),__vite__mapDeps([30,6,5,2,7,8,1,9,10,11,12,13,14,15,16,17,18,19,20,3,21,22,23,24,25,26,27]),import.meta.url)}]},{path:"/sign-in",component:()=>R(()=>import("./Index-BEhqYX5C.js"),__vite__mapDeps([29,4,2,3,5,21,7,8,1,9,10,11,12,13,14,15,16,17,18,19,20,22,23,24,25,26,27]),import.meta.url),children:[{path:"",meta:{whitelist:!0,breadcrumb:"登录",i18n:"common:menu.sign-in"},component:()=>R(()=>import("./Index-BOHqcSD3.js"),__vite__mapDeps([31,6,5,2,7,8,1,9,10,11,12,13,14,15,16,17,18,19,20,3,21,22,23,24,25,26,27]),import.meta.url)}]},{path:"/:pathMatch(.*)*",component:()=>R(()=>import("./Index-CMgOuigK.js"),__vite__mapDeps([32,2]),import.meta.url)}]});let B=null;const W=nt.create({baseURL:void 0});W.interceptors.request.use(e=>{const t=G().accessToken;return t&&(e.headers.Authorization=t),e},e=>Promise.reject(e));W.interceptors.response.use(e=>e,e=>{var s;const{config:t,status:o,message:a}=e;if(o!==401||!t)return H.error(a),Promise.reject();const n=G().refreshToken;return(s=t.url)!=null&&s.endsWith("refresh-token")||!n?(H.error("用户信息过期，请重新登陆"),Ie(),z.push({path:"/sign-in",query:{redirect:z.currentRoute.value.fullPath}}),Promise.reject()):(B||(B=W.request({url:"/refresh-token",method:"post",data:{refreshToken:n}}),B.then(({data:r})=>ft(r)).finally(()=>B=null)),B.then(()=>(t.headers.Authorization=G().accessToken,W.request(t))))});const re=e=>{const t=b(),o=b(),a=b(!1),n=b(()=>{});let s;const r=_=>{const p=new AbortController;return s=_,a.value=!0,n.value=p.abort,W.request({...e(_),signal:p.signal}).then(({data:l})=>l.code!==200?(l.message&&H.error(l.message),Promise.reject()):(t.value=l,l)).finally(()=>{a.value=!1,n.value=()=>{}})};return{result:t,error:o,loading:a,cancel:n,execute:r,refresh:()=>r(s)}},St=()=>re(()=>({url:"/app/locale",method:"get"})),Tt=()=>re(e=>({url:"/app/translation",method:"get",params:e})),Pt=()=>re(()=>({url:"/user-info",method:"post",data:{accessToken:G().accessToken}})),an=()=>re(e=>({url:"/user-password",method:"post",data:e})),Et={path:"/administrator",meta:{icon:"User",breadcrumb:"权限管理",i18n:"common:menu.administrator"},component:()=>R(()=>import("./Index-B-rRpjFU.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28]),import.meta.url),children:[{path:"menu",meta:{breadcrumb:"菜单列表",i18n:"common:menu.administrator-menu"},component:()=>R(()=>import("./Index-CoEdmwfY.js"),__vite__mapDeps([33,11,12,13,14,15,16,1,2,7,8,9,10,17,18,19,20,3,5,21,22,23,24,25,26,27]),import.meta.url)}]},Ct=[Et];function Re(e,t,o){const a=e?e+(t.path?"/"+t.path:""):t.path,n=o.find(s=>s.path===a);if(n){const{name:s,icon:r}=n;return s&&t.meta&&(t.meta.breadcrumb=s),r&&t.meta&&(t.meta.icon=r),t.children&&(t.children=t.children.filter(c=>Re(a,c,o))),t}}const Oe=lt("user",()=>{const e=b(),t=w(()=>[...Ct].filter(s=>{var r,c;return Re("",s,((c=(r=e.value)==null?void 0:r.role)==null?void 0:c.menus)||[])})),o=w(()=>{var s,r;return((r=(s=e.value)==null?void 0:s.role)==null?void 0:r.buttons)||[]});return{user:e,menus:t,buttons:o,fetchUser:()=>{const{execute:s}=Pt();return s().then(({data:r})=>{var _,p;e.value=r;const c=(_=r.region)==null?void 0:_.code;return!U("language")&&c&&c!==((p=L.value)==null?void 0:p.code)&&Ne(c,!1),r})},clearUser:()=>e.value=void 0}}),Me=mt({}),M=Me.global;M.setLocaleMessage("en",{"common:locale.load-failed":"Failed to load locale","common:locale.load-translation":"Translation is loading"});M.setLocaleMessage("zhCn",{"common:locale.load-failed":"加载多语言配置失败","common:locale.load-translation":"多语言配置加载中"});const K={},Ce=[],L=b(),F=b(),Ne=(e,t=!0)=>{if(!F.value)return;const o=F.value.find(a=>a.code===e);L.value=o??F.value[0],e=L.value.code,t&&j("language",e),De().then(()=>M.locale=L.value.code)},De=async e=>{const t=H({duration:0,message:M.t("common:locale.load-translation")});await ge("common"),await ge(e||z.currentRoute.value.path),t.close()},ge=e=>{var n;const t=(n=L.value)==null?void 0:n.code;if(!t||Ce.find(s=>s.code===t&&s.stem===e))return;K[t]||(K[t]={});const{execute:a}=Tt();return a({code:t,stem:e}).then(({data:s})=>{Ce.push({code:t,stem:e}),Object.assign(K[t],s),M.setLocaleMessage(t,K[t])})},zt=()=>{const e=Oe(),{execute:t}=St();return t().then(({data:o})=>{var s,r;F.value=o;const a=U("language")||((r=(s=e.user)==null?void 0:s.region)==null?void 0:r.code),n=o.find(c=>c.code===a);L.value=n??o[0],M.locale=L.value.code})},xt=k({__name:"Index",setup(e){return(t,o)=>{const a=m("el-dropdown-item"),n=m("el-dropdown-menu"),s=m("el-dropdown");return d(F)?(f(),v(s,{key:0,onCommand:d(Ne)},{dropdown:i(()=>[u(n,null,{default:i(()=>[(f(!0),P(D,null,N(d(F),({code:r,name:c,icon:_})=>{var p;return f(),v(a,{key:r,command:r,class:be({"dropdown-item-active":r===((p=d(L))==null?void 0:p.code)})},{default:i(()=>[O(I(_)+" "+I(c),1)]),_:2},1032,["command","class"])}),128))]),_:1})]),default:i(()=>[o[0]||(o[0]=T("div",{class:"placeholder"},[T("svg",{viewBox:"0 0 24 24",width:"18",height:"18",fill:"currentColor"},[T("path",{d:"M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"})])],-1))]),_:1},8,["onCommand"])):$e("",!0)}}}),$t=k({__name:"Index",props:fe({rules:{default:()=>({})},initValue:{type:Function},service:{}},{model:{required:!0},modelModifiers:{},params:{required:!0},paramsModifiers:{}}),emits:fe(["reset","search"],["update:model","update:params"]),setup(e,{emit:t}){const o=t,a=_e(e,"model"),n=_e(e,"params"),{isMobile:s}=se(),r=ke("dom"),c=w(()=>e.service.loading.value),_=w(()=>s.value?"auto":""),p=()=>{const g=e.initValue();a.value={...g},n.value={...g,pageSize:n.value.pageSize},h().then(()=>o("reset"))},l=()=>{n.value={...a.value,pageSize:n.value.pageSize},h().then(()=>o("search"))},h=()=>r.value?r.value.validate().then(y):Promise.reject(),y=()=>e.service.execute(n.value);return(g,x)=>{const $=m("el-button"),ce=m("el-form-item"),le=m("el-form"),ie=m("el-card");return f(),v(ie,{shadow:"never",class:"!border-0 mb-4"},{default:i(()=>[u(le,{ref_key:"dom",ref:r,model:a.value,rules:g.rules,inline:!d(s),"label-width":_.value,class:"-mb-[18px]"},{default:i(()=>[V(g.$slots,"default"),u(ce,null,{default:i(()=>[u($,{disabled:c.value,onClick:p},{default:i(()=>[O(I(g.$t("common.reset")),1)]),_:1},8,["disabled"]),u($,{loading:c.value,type:"primary",onClick:l},{default:i(()=>[O(I(g.$t("common.search")),1)]),_:1},8,["loading"])]),_:1}),V(g.$slots,"toolbar")]),_:3},8,["model","rules","inline","label-width"])]),_:3})}}}),[It,Ue]=Z((e,t)=>({service:e,params:t,changePageNo:n=>{t.value.pageNo=n,e.execute(t.value)},changePageSize:n=>{t.value.pageNo=1,t.value.pageSize=n,e.execute(t.value)}})),[Lt,ye]=Z(()=>{const{isMobile:e}=se(),t=b(e.value?"small":"default");return{size:t,sizes:[{command:"small",text:"紧凑"},{command:"default",text:"中等"},{command:"large",text:"宽松"}],change:n=>{t.value=n}}}),At=k({__name:"Index",setup(e){const{isMobile:t}=se(),{size:o}=ye(),{service:a,params:n,changePageNo:s,changePageSize:r}=Ue(),c=w(()=>t.value?"prev, pager, next, total":"total, prev, pager, next, sizes");return(_,p)=>{var h;const l=m("el-pagination");return f(),v(l,{background:"",size:d(o),layout:c.value,"pager-count":5,"page-sizes":[10,20,30,40,50,100],"page-size":d(n).pageSize,"current-page":d(n).pageNo,total:((h=d(a).result.value)==null?void 0:h.total)||0,class:"mt-4 justify-end sm:justify-center sm:flex-wrap",onSizeChange:d(r),onCurrentChange:d(s)},null,8,["size","layout","page-size","current-page","total","onSizeChange","onCurrentChange"])}}}),[Rt,we]=Z(e=>{const t=e.filter(l=>!l.defaultHide).map(l=>l.prop),o=b([...e]),a=b(t),n=w(()=>o.value.filter(l=>a.value.includes(l.prop)||l.alwaysShow)),s=w(()=>a.value.length===e.length),r=w(()=>!!a.value.length&&a.value.length!==e.length);return{columns:o,selected:a,result:n,isAll:s,indeterminate:r,select:l=>a.value=l,selectAll:l=>{a.value=l?e.map(h=>h.prop):e.filter(h=>h.alwaysShow).map(h=>h.prop)},reset:()=>{o.value=[...e],a.value=t}}}),[Ot,Mt]=Z(e=>{const{toggle:t}=Xe(e);return{toggle:t}}),[Nt,Dt]=Z(e=>({props:e})),[Ut,Fe]=Z((e=!1)=>{const[t,o]=Ye(e);return{stripe:t,toggle:o}}),Ve=(e,t)=>{const o=e.__vccOpts||e;for(const[a,n]of t)o[a]=n;return o},Ft={};function Vt(e,t){const o=m("el-empty");return f(),v(o,{description:"暂无展示列"})}const jt=Ve(Ft,[["render",Vt]]),Zt=k({__name:"Table",setup(e){const{result:t}=we(),{props:o}=Dt(),{stripe:a}=Fe(),{size:n}=ye(),s=w(()=>S.value?{"--el-table-header-bg-color":"unset","--el-table-tr-bg-color":"unset","--el-fill-color-lighter":"#202121"}:{});return(r,c)=>{const _=m("el-table-column"),p=m("el-table");return f(),v(p,Se({data:d(o).data,size:d(n),stripe:d(a),style:s.value,border:""},d(o).tableProps),{default:i(()=>[(f(!0),P(D,null,N(d(t),l=>(f(),v(_,Se({key:l.prop,ref_for:!0},l,{label:l.i18n?r.$t(l.i18n):l.label}),Be({_:2},[l.headerSlot?{name:"header",fn:i(h=>[(f(!0),P(D,null,N(l.headerSlot(h),(y,g)=>(f(),v(ne(y),{key:g}))),128))]),key:"0"}:void 0,l.defaultSlot?{name:"default",fn:i(h=>[h.$index!==-1?(f(!0),P(D,{key:0},N(l.defaultSlot(h),(y,g)=>(f(),v(ne(y),{key:g}))),128)):$e("",!0)]),key:"1"}:void 0]),1040,["label"]))),128))]),_:1},16,["data","size","stripe","style"])}}}),qt=k({__name:"Index",setup(e){const{selected:t}=we();return(o,a)=>(f(),P("div",null,[he(u(Zt,null,null,512),[[Te,d(t).length]]),he(u(jt,null,null,512),[[Te,!d(t).length]])]))}}),Bt=k({__name:"Fullscreen",setup(e){const{toggle:t}=Mt();return(o,a)=>{const n=m("FullScreen"),s=m("el-icon"),r=m("el-tooltip");return f(),v(r,{content:o.$t("common:table.fullscreen"),placement:"top"},{default:i(()=>[u(s,{size:"18",class:"cursor-pointer",onClick:d(t)},{default:i(()=>[u(n)]),_:1},8,["onClick"])]),_:1},8,["content"])}}}),Wt=k({__name:"Refresh",setup(e){const{service:t}=Ue(),o=()=>{t.loading.value||t.refresh()};return(a,n)=>{const s=m("RefreshRight"),r=m("el-icon"),c=m("el-tooltip");return f(),v(c,{content:a.$t("common:table.refresh"),placement:"top"},{default:i(()=>[u(r,{size:"18",class:"cursor-pointer",onClick:o},{default:i(()=>[u(s)]),_:1})]),_:1},8,["content"])}}}),Ht={class:"text-[0px]"},Gt={class:"flex items-center justify-between"},Jt={class:"max-h-80 overflow-y-auto"},Qt=k({__name:"Setting",setup(e){const{columns:t,selected:o,isAll:a,indeterminate:n,select:s,selectAll:r,reset:c}=we(),_=ke("dom");return We(()=>{new ut(_.value,{animation:150,handle:".cursor-move",onEnd({oldIndex:p,newIndex:l}){if(p!==void 0&&l!==void 0){let h=t.value.splice(p,1)[0];t.value.splice(l,0,h)}}})}),(p,l)=>{const h=m("Setting",!0),y=m("el-icon"),g=m("el-tooltip"),x=m("el-checkbox"),$=m("el-link"),ce=m("Rank"),le=m("el-text"),ie=m("el-checkbox-group"),qe=m("el-popover");return f(),v(qe,{trigger:"click",width:"200"},{reference:i(()=>[T("div",Ht,[u(g,{content:p.$t("common:table.setting"),placement:"top"},{default:i(()=>[u(y,{size:"18",class:"cursor-pointer"},{default:i(()=>[u(h)]),_:1})]),_:1},8,["content"])])]),default:i(()=>[T("div",Gt,[u(x,{"model-value":d(a),indeterminate:d(n),onChange:d(r)},{default:i(()=>[O(I(p.$t("common:table.col-show/sort")),1)]),_:1},8,["model-value","indeterminate","onChange"]),u($,{type:"primary",underline:!1,onClick:d(c)},{default:i(()=>[O(I(p.$t("common.reset")),1)]),_:1},8,["onClick"])]),T("div",Jt,[u(ie,{"model-value":d(o),onChange:d(s)},{default:i(()=>[T("div",{ref_key:"dom",ref:_},[(f(!0),P(D,null,N(d(t),q=>(f(),P("div",{key:q.prop,class:"flex items-center"},[u(y,{size:"16",class:"mr-2 cursor-move"},{default:i(()=>[u(ce)]),_:1}),u(x,{value:q.prop,disabled:q.alwaysShow},{default:i(()=>[u(le,{truncated:""},{default:i(()=>[O(I(p.$t(q.i18n||"",q.label||"")),1)]),_:2},1024)]),_:2},1032,["value","disabled"])]))),128))],512)]),_:1},8,["model-value","onChange"])])]),_:1})}}}),Kt=Ve(Qt,[["__scopeId","data-v-5d7c8ecd"]]),Xt={class:"text-[0px]"},Yt=k({__name:"Size",setup(e){const{size:t,sizes:o,change:a}=ye();return(n,s)=>{const r=m("Grid"),c=m("el-icon"),_=m("el-tooltip"),p=m("el-dropdown-item"),l=m("el-dropdown-menu"),h=m("el-dropdown");return f(),v(h,{trigger:"click",onCommand:d(a)},{dropdown:i(()=>[u(l,null,{default:i(()=>[(f(!0),P(D,null,N(d(o),({command:y})=>(f(),v(p,{key:y,command:y,class:be({"dropdown-item-active":d(t)===y})},{default:i(()=>[O(I(n.$t("common:table.size."+y)),1)]),_:2},1032,["command","class"]))),128))]),_:1})]),default:i(()=>[T("div",Xt,[u(_,{content:n.$t("common:table.size"),placement:"top"},{default:i(()=>[u(c,{size:"18",class:"cursor-pointer"},{default:i(()=>[u(r)]),_:1})]),_:1},8,["content"])])]),_:1},8,["onCommand"])}}}),eo=k({__name:"Stripe",setup(e){const{stripe:t,toggle:o}=Fe();return(a,n)=>{const s=m("el-switch"),r=m("el-tooltip");return f(),v(r,{content:a.$t("common:table.stripe"),placement:"top"},{default:i(()=>[u(s,{"model-value":d(t),"inline-prompt":"","active-text":a.$t("common:table.stripe.open"),"inactive-text":a.$t("common:table.stripe.close"),onChange:d(o)},null,8,["model-value","active-text","inactive-text","onChange"])]),_:1},8,["content"])}}}),to={class:"mb-4 flex justify-between"},oo=k({__name:"Index",setup(e){const t=He(at,{direction:"vertical"});return(o,a)=>{const n=m("el-space");return f(),P("div",to,[T("div",null,[V(o.$slots,"left")]),u(n,{spacer:d(t)},{default:i(()=>[u(n,{size:"default"},{default:i(()=>[V(o.$slots,"default"),u(eo)]),_:3}),u(n,{size:"default"},{default:i(()=>[u(Wt),u(Yt),u(Kt),u(Bt)]),_:1})]),_:3},8,["spacer"])])}}}),no=["element-loading-background"],ao=k({__name:"Index",props:fe({data:{},columns:{},service:{},tableProps:{}},{params:{required:!0},paramsModifiers:{}}),emits:["update:params"],setup(e){const t=e,o=_e(e,"params"),a=t.service,n=t.columns,s=ke("dom"),r=w(()=>S.value?"rgba(38, 39, 39, .5)":"rgba(255, 255, 255, .5)");return It(a,o),Rt(n),Ot(s),Nt(t),Ut(),Lt(),(c,_)=>{const p=m("el-card"),l=Ge("loading");return f(),v(p,{shadow:"never",class:"!border-0"},{default:i(()=>[T("div",{ref_key:"dom",ref:s},[u(oo,null,{default:i(()=>[V(c.$slots,"toolbar")]),_:3}),he((f(),P("div",{"element-loading-background":r.value},[u(qt),u(At)],8,no)),[[l,d(a).loading.value]])],512)]),_:3})}}}),so=k({__name:"App",setup(e){const t=["development","mock"].includes("mock")?"内容仅供测试和展示":"",o=w(()=>{var n;return st[(n=L.value)==null?void 0:n.code]}),a=w(()=>({fontSize:16,color:S.value?"rgba(255, 255, 255, 0.1)":"rgba(0, 0, 0, 0.1)"}));return(n,s)=>{const r=m("router-view"),c=m("el-watermark"),_=m("el-config-provider");return f(),v(_,{locale:o.value},{default:i(()=>[u(c,{content:d(t),font:a.value,"z-index":9999},{default:i(()=>[u(r)]),_:1},8,["content","font"])]),_:1},8,["locale"])}}}),ro=()=>{Ae(U("dark")??Le.auto,!1)},co=()=>{window.addEventListener("vite:preloadError",()=>{rt.alert("新的版本更新","提示",{confirmButtonText:"确定",callback:()=>window.location.reload()})})},ae="--el-color-primary",ze=Array.from({length:2},(e,t)=>`${ae}-dark-${t+1}`),xe=Array.from({length:9},(e,t)=>`${ae}-light-${t+1}`),lo="#409EFF",ve=b(U("color")),je=e=>{const t=document.documentElement;if(!e){j("color",void 0),ve.value=lo,t.style.removeProperty(ae),ze.forEach(o=>t.style.removeProperty(o)),xe.forEach(o=>t.style.removeProperty(o));return}j("color",e),ve.value=e,t.style.setProperty(ae,e),ze.forEach((o,a)=>{const n=a*.2;let s;S.value?s=Q(e).lighten(n).hex():s=Q(e).darken(n).hex(),t.style.setProperty(o,s)}),xe.forEach((o,a)=>{const n=a*.08;let s;S.value?s=Q(e).darken(n).hex():s=Q(e).lighten(n).hex(),t.style.setProperty(o,s)})};Je(()=>S.value,(e,t)=>{t!==void 0&&je(ve.value)});const io=b(!1),mo=e=>{io.value=e,j("gray",e),e?document.documentElement.classList.add("grayscale"):document.documentElement.classList.remove("grayscale")},uo=b(!1),po=e=>{uo.value=e,j("weak",e),e?document.documentElement.classList.add("invert"):document.documentElement.classList.remove("invert")},fo=()=>{je(U("color")),po(!!U("weak")),mo(!!U("gray"))},_o=e=>{e.use(Me),z.beforeResolve(async t=>{try{F.value?await ge(t.path):(await zt(),await De(t.path))}catch{H.error(M.t("common:locale.load-failed"))}})},ho=function(){return{code:200,total:5,data:[{id:"6660234fd19a93e740a65c56",status:0,deleted:!1,createAt:"2024-06-05T08:35:27.441Z",updateAt:"2024-06-11T02:14:15.346Z",name:"用户列表",path:"/administrator/user",icon:null,parentId:"6660234fd19a93e740a65c49",parent:{id:"6660234fd19a93e740a65c49",status:0,deleted:!1,createAt:"2024-06-05T08:35:27.353Z",updateAt:"2024-06-05T08:35:27.353Z",name:"权限管理",path:"/administrator",icon:"User",parentId:null}},{id:"6660234fd19a93e740a65c52",status:0,deleted:!1,createAt:"2024-06-05T08:35:27.433Z",updateAt:"2024-06-05T08:35:27.433Z",name:"角色列表",path:"/administrator/role",icon:null,parentId:"6660234fd19a93e740a65c49",parent:{id:"6660234fd19a93e740a65c49",status:0,deleted:!1,createAt:"2024-06-05T08:35:27.353Z",updateAt:"2024-06-05T08:35:27.353Z",name:"权限管理",path:"/administrator",icon:"User",parentId:null}},{id:"6660234fd19a93e740a65c4e",status:0,deleted:!1,createAt:"2024-06-05T08:35:27.410Z",updateAt:"2024-06-05T08:35:27.410Z",name:"按钮列表",path:"/administrator/button",icon:null,parentId:"6660234fd19a93e740a65c49",parent:{id:"6660234fd19a93e740a65c49",status:0,deleted:!1,createAt:"2024-06-05T08:35:27.353Z",updateAt:"2024-06-05T08:35:27.353Z",name:"权限管理",path:"/administrator",icon:"User",parentId:null}},{id:"6660234fd19a93e740a65c4a",status:0,deleted:!1,createAt:"2024-06-05T08:35:27.383Z",updateAt:"2024-06-05T08:35:27.383Z",name:"菜单列表",path:"/administrator/menu",icon:null,parentId:"6660234fd19a93e740a65c49",parent:{id:"6660234fd19a93e740a65c49",status:0,deleted:!1,createAt:"2024-06-05T08:35:27.353Z",updateAt:"2024-06-05T08:35:27.353Z",name:"权限管理",path:"/administrator",icon:"User",parentId:null}},{id:"6660234fd19a93e740a65c49",status:0,deleted:!1,createAt:"2024-06-05T08:35:27.353Z",updateAt:"2024-06-05T08:35:27.353Z",name:"权限管理",path:"/administrator",icon:"User",parentId:null,parent:null}]}},go=function(){return{code:200,data:[{icon:"🇨🇳",code:"zhCn",name:"简体中文"},{icon:"🇺🇸",code:"en",name:"English"}]}},X={"common.search":"Search","common.create":"Create","common.update":"Update","common.remove":"Remove","common.reset":"Reset","common.edit":"Edit","common.enable":"Enable","common.disable":"Disable","common.verify":"Verify","common.submit":"Submit","common.cancel":"Cancel","common.confirm":"Confirm","common.confirm-remove?":"Remove?","common.please-input":"Please input","common.please-select":"Please select","common:mode.light":"Light","common:mode.dark":"Dark","common:mode.auto":"Auto","common:menu.home":"Home","common:menu.sign-up":"Register","common:menu.sign-in":"Login","common:menu.administrator":"administrator","common:menu.administrator-menu":"Menu List","common:locale.load-failed":"Failed to load locale","common:locale.load-translation":"Translation is loading","common:layout.change-password":"Change Password","common:layout.current-password":"Current Password","common:layout.new-password":"New Password","common:layout.confirm-password":"Confirm Password","common:layout.change-password.success":"Change Password Success","common:layout.sign-out":"Sign out","common:layout.sign-out-success":"Sign out Success","common:table.stripe":"Table Stripe","common:table.stripe.open":"O","common:table.stripe.close":"X","common:table.refresh":"Refresh","common:table.size":"Size","common:table.size.small":"Small","common:table.size.default":"Medium","common:table.size.large":"Large","common:table.setting":"Col Setting","common:table.fullscreen":"Fullscreen","common:table.col-show/sort":"Col Show/Sort","/sign-in.login":"Login","/sign-in.to-register":"Haven't account? Go to register","/sign-in.login-success":"Account Login Success","/sign-up.register":"Register","/sign-up.to-login":"Have account? Go to login","/administrator/menu.selection":"Selection","/administrator/menu.id":"ID","/administrator/menu.name":"Name","/administrator/menu.path":"Path","/administrator/menu.icon":"Icon","/administrator/menu.parent":"Parent","/administrator/menu.create-time":"Create time","/administrator/menu.status":"Status","/administrator/menu.operations":"Operations"},Y={"common.search":"查询","common.create":"新建","common.update":"更新","common.remove":"删除","common.reset":"重置","common.edit":"编辑","common.enable":"启用","common.disable":"禁用","common.verify":"校验","common.submit":"提交","common.cancel":"取消","common.confirm":"确定","common.confirm-remove?":"确定删除吗？","common.please-input":"请输入","common.please-select":"请选择","common:mode.light":"明亮模式","common:mode.dark":"暗黑模式","common:mode.auto":"跟随系统","common:menu.home":"首页","common:menu.sign-up":"注册","common:menu.sign-in":"登陆","common:menu.administrator":"权限管理","common:menu.administrator-menu":"菜单列表","common:locale.load-failed":"加载多语言配置失败","common:locale.load-translation":"多语言配置加载中","common:layout.change-password":"更改密码","common:layout.current-password":"当前密码","common:layout.new-password":"新的密码","common:layout.confirm-password":"确认密码","common:layout.change-password.success":"密码修改成功","common:layout.sign-out":"退出登录","common:layout.sign-out-success":"账号退出成功","common:table.stripe":"表格斑马纹","common:table.stripe.open":"开","common:table.stripe.close":"关","common:table.refresh":"刷新","common:table.size":"密度","common:table.size.small":"紧凑","common:table.size.default":"中等","common:table.size.large":"宽松","common:table.setting":"列设置","common:table.fullscreen":"全屏","common:table.col-show/sort":"列展示/排序","/sign-in.login":"登录","/sign-in.to-register":"没有账号？去注册","/sign-in.login-success":"账号登录成功","/sign-up.register":"注册","/sign-up.to-login":"已有账号？去登陆","/administrator/menu.selection":"多选按钮","/administrator/menu.id":"菜单编号","/administrator/menu.name":"菜单名称","/administrator/menu.path":"菜单路径","/administrator/menu.icon":"菜单图标","/administrator/menu.parent":"父级菜单","/administrator/menu.create-time":"创建时间","/administrator/menu.status":"菜单状态","/administrator/menu.operations":"管理操作"},vo=function(e){const t=e.url;function o(a,n){return Object.fromEntries(Object.entries(a).filter(([s])=>s.startsWith(n)))}if(t.includes("code=zhCn")){if(t.includes("stem=common"))return{code:200,data:o(Y,"common")};if(t.includes("stem=%2Fsign-in"))return{code:200,data:o(Y,"/sign-in")};if(t.includes("stem=%2Fsign-up"))return{code:200,data:o(Y,"/sign-up")};if(t.includes("stem=%2Fadministrator%2Fmenu"))return{code:200,data:o(Y,"/administrator/menu")}}if(t.includes("code=en")){if(t.includes("stem=common"))return{code:200,data:o(X,"common")};if(t.includes("stem=%2Fsign-in"))return{code:200,data:o(X,"/sign-in")};if(t.includes("stem=%2Fsign-up"))return{code:200,data:o(X,"/sign-up")};if(t.includes("stem=%2Fadministrator%2Fmenu"))return{code:200,data:o(X,"/administrator/menu")}}return{code:200}},Ze=e=>{const t=Date.now();return{accessToken:e+"-accessToken-"+t,refreshToken:e+"-refreshToken-"+(t+7*24*60*60*1e3)}},bo=function(e){const o=JSON.parse(e.body).username;return o==="admin"||o==="guest"?{code:200,data:Ze(o)}:{code:400,message:"账号密码不正确"}},ko=function(){return{code:200}},yo=function(){return{code:200}},wo=function(e){const a=JSON.parse(e.body).refreshToken.replace("-");return Date.now()<parseInt(a[2])?{code:200,data:Ze(a[0])}:{code:401}},So={id:"6660234fd19a93e740a65c5c",username:"guest",region:{code:"en"}},To={id:"6660234fd19a93e740a65c5c",username:"admin",avatar:"https://gw.alipayobjects.com/zos/rmsportal/BiazfanxmamNRoxxVxka.png",region:{code:"zhCn"},role:{menus:[{id:"6660234fd19a93e740a65c49",path:"/administrator",name:"权限管理",icon:"User",parentId:null},{id:"6660234fd19a93e740a65c4a",path:"/administrator/menu",name:"菜单列表",icon:null,parentId:"6660234fd19a93e740a65c49"},{id:"6660234fd19a93e740a65c4e",path:"/administrator/button",name:"按钮列表",icon:null,parentId:"6660234fd19a93e740a65c49"},{id:"6660234fd19a93e740a65c52",path:"/administrator/role",name:"角色列表",icon:null,parentId:"6660234fd19a93e740a65c49"},{id:"6660234fd19a93e740a65c56",path:"/administrator/user",name:"用户列表",icon:null,parentId:"6660234fd19a93e740a65c49"}],buttons:[{id:"6660234fd19a93e740a65c4b",code:"administrator_menu_create",name:"菜单新建"},{id:"6660234fd19a93e740a65c4c",code:"administrator_menu_update",name:"菜单编辑"},{id:"6660234fd19a93e740a65c4d",code:"administrator_menu_remove",name:"菜单删除"},{id:"6660234fd19a93e740a65c4f",code:"administrator_button_create",name:"按钮新建"},{id:"6660234fd19a93e740a65c50",code:"administrator_button_update",name:"按钮编辑"},{id:"6660234fd19a93e740a65c51",code:"administrator_button_remove",name:"按钮删除"},{id:"6660234fd19a93e740a65c53",code:"administrator_role_create",name:"角色新建"},{id:"6660234fd19a93e740a65c54",code:"administrator_role_update",name:"角色编辑"},{id:"6660234fd19a93e740a65c55",code:"administrator_role_remove",name:"角色删除"},{id:"6660234fd19a93e740a65c57",code:"administrator_user_create",name:"用户新建"},{id:"6660234fd19a93e740a65c58",code:"administrator_user_update",name:"用户编辑"},{id:"6660234fd19a93e740a65c59",code:"administrator_user_remove",name:"用户删除"},{id:"6660234fd19a93e740a65c5a",code:"administrator_user_password",name:"用户密码"}]}},Po=function(e){const o=JSON.parse(e.body).accessToken,a=o.startsWith("admin"),n=o.startsWith("guest");return a?{code:200,data:To}:n?{code:200,data:So}:{code:400,message:"无法获取用户信息"}},Eo=function(){return{code:200}},Co=()=>{C.setup({timeout:500}),C.mock(/\/app\/locale/,go),C.mock(/\/app\/translation/,vo),C.mock(/\/sign-in/,bo),C.mock(/\/sign-out/,ko),C.mock(/\/sign-up/,yo),C.mock(/\/refresh-token/,wo),C.mock(/\/user-info/,Po),C.mock(/\/user-password/,Eo),C.mock(/\/administrator\/menu/,ho)};let de=[];const pe="/sign-in",zo="/sign-up",xo=()=>{z.beforeEach(async e=>{const t=Oe();if(!G().accessToken)return t.clearUser(),e.meta.whitelist?!0:{path:pe,query:{redirect:e.fullPath}};if(!t.user)try{return de.forEach(a=>a()),de=[],await t.fetchUser(),t.menus.forEach(a=>{de.push(z.addRoute(a))}),e.fullPath}catch{return Ie(),{path:pe}}return[pe,zo].includes(e.path)?{path:"/"}:!0})},$o=()=>{z.beforeEach(()=>{Pe.start()}),z.afterEach(()=>{Pe.done()})},Io=()=>{z.beforeResolve(e=>{const t=w(()=>e.meta.i18n?M.t(e.meta.i18n):e.meta.breadcrumb);et(t)})},Lo=[Co,co,ro,fo,$o,xo,_o,Io],E=Qe(so);for(const[e,t]of Object.entries(dt))E.component(e,t);E.use(ct);E.use(it());E.use(z);Object.values(Lo).forEach(e=>E.use(e));E.component("CommonDark",bt);E.component("CommonLocale",xt);E.component("CommonDialog",kt);E.component("CommonSearch",$t);E.component("CommonTable",ao);E.mount("#app");export{Ve as _,Oe as a,an as b,ve as c,Ae as d,oe as e,_t as f,U as g,io as h,M as i,mo as j,L as k,F as l,J as m,Ne as n,po as o,ft as p,re as q,Ie as r,j as s,je as t,se as u,uo as w};
